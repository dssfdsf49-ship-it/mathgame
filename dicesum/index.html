<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì£¼ì‚¬ìœ„ ë˜ì§€ê¸° ì‹¤í—˜</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #0f172a;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: #e5e7eb;
      font-size: 16px;
    }

    .app {
      background: #020617;
      padding: 28px 32px;
      border-radius: 24px;
      box-shadow: 0 24px 48px rgba(0, 0, 0, 0.55);
      width: 640px;
      max-width: 100vw;
    }

    h1 {
      margin: 0 0 8px;
      font-size: 1.6rem;
      text-align: center;
    }

    .subtitle {
      margin: 0 0 20px;
      font-size: 0.95rem;
      text-align: center;
      color: #9ca3af;
    }

    .top-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
      margin-bottom: 16px;
    }

    .dice-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .dice {
      width: 96px;
      height: 96px;
      border-radius: 18px;
      border: 2px solid rgba(148, 163, 184, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 46px;
      font-weight: 700;
      background: radial-gradient(circle at 20% 20%, #1f2937, #020617);
      text-shadow: 0 0 8px rgba(15, 23, 42, 0.8);
      user-select: none;
    }

    @keyframes roll {
      0%   { transform: translateY(0) rotate(0deg); }
      25%  { transform: translateY(-10px) rotate(90deg); }
      50%  { transform: translateY(0) rotate(180deg); }
      75%  { transform: translateY(-6px) rotate(270deg); }
      100% { transform: translateY(0) rotate(360deg); }
    }

    .dice.rolling {
      animation: roll 0.6s ease-in-out;
    }

    .total {
      font-size: 0.95rem;
      color: #9ca3af;
    }

    button {
      border-radius: 999px;
      border: none;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.08s ease, box-shadow 0.08s ease, opacity 0.08s ease;
    }

    #roll-btn {
      flex: 1;
      padding: 14px 18px;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 10px 20px rgba(22, 163, 74, 0.3);
      white-space: nowrap;
    }

    #roll-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 28px rgba(22, 163, 74, 0.35);
    }

    #roll-btn:active {
      transform: translateY(1px);
      box-shadow: 0 6px 12px rgba(22, 163, 74, 0.25);
      opacity: 0.9;
    }

    #roll-btn:disabled {
      opacity: 0.6;
      cursor: default;
      transform: none;
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.4);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      margin-top: 10px;
    }

    thead th {
      font-weight: 600;
      text-align: left;
      padding-bottom: 6px;
      border-bottom: 1px solid #1f2933;
      color: #9ca3af;
    }

    tbody tr:nth-child(even) {
      background: rgba(15, 23, 42, 0.6);
    }

    td {
      padding: 5px 3px;
      vertical-align: middle;
    }

    .face-cell {
      width: 34px;
      text-align: center;
      font-weight: 600;
    }

    .bar-cell {
      width: 100%;
    }

    .bar {
      width: 100%;
      height: 12px;
      border-radius: 999px;
      background: #020617;
      overflow: hidden;
    }

    .bar-inner {
      height: 100%;
      width: 0%;
      border-radius: 999px;
      background: linear-gradient(90deg, #38bdf8, #6366f1);
      transition: width 0.2s ease;
    }

    .count-cell,
    .freq-cell {
      text-align: right;
      width: 60px;
      padding-right: 4px;
      font-variant-numeric: tabular-nums;
    }

    .auto-controls {
      margin-top: 8px;
      margin-bottom: 6px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(15, 23, 42, 0.9);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .auto-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 10px;
    }

    #auto-toggle {
      padding: 9px 14px;
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
      box-shadow: 0 8px 16px rgba(37, 99, 235, 0.35);
      font-size: 0.85rem;
      white-space: nowrap;
    }

    #auto-toggle.running {
      background: linear-gradient(135deg, #ef4444, #b91c1c);
      box-shadow: 0 8px 16px rgba(239, 68, 68, 0.35);
    }

    .speed-controls {
      display: flex;
      align-items: flex-start;
      gap: 8px;
    }

    .speed-label {
      font-size: 0.8rem;
      color: #9ca3af;
      margin-top: 4px;
      white-space: nowrap;
    }

    .speed-rows {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .speed-row {
      display: flex;
      gap: 4px;
    }

    .speed-btn {
      padding: 4px 8px;
      font-size: 0.8rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: #020617;
      color: #e5e7eb;
      cursor: pointer;
      min-width: 80px;
      text-align: center;
      white-space: nowrap;
    }

    .speed-btn.active {
      background: #1d4ed8;
      border-color: #3b82f6;
      color: #f9fafb;
    }

    .speed-btn:hover {
      transform: translateY(-1px);
    }

    .footer {
      margin-top: 10px;
      font-size: 0.8rem;
      color: #6b7280;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .credit {
      font-weight: 600;
      color: #9ca3af;
      white-space: nowrap;
    }

    /* ì‘ì€ í™”ë©´(í°)ì—ì„œ ìƒë‹¨ ë ˆì´ì•„ì›ƒ ì •ë¦¬ */
    @media (max-width: 600px) {
      .top-row {
        flex-direction: column;
        align-items: stretch;
      }

      #roll-btn {
        width: 100%;
      }

      .app {
        padding: 20px 16px;
        border-radius: 0;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>ì£¼ì‚¬ìœ„ ë˜ì§€ê¸° ì‹¤í—˜</h1>
    <p class="subtitle">ë²„íŠ¼ì„ ëˆŒëŸ¬ ì£¼ì‚¬ìœ„ë¥¼ ë˜ì§€ê³ , ìƒëŒ€ë„ìˆ˜ë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”.</p>

    <div class="top-row">
      <div class="dice-wrapper">
        <div id="dice" class="dice">-</div>
        <div class="total">ì´ ë˜ì§„ íšŸìˆ˜: <span id="total-rolls">0</span>íšŒ</div>
      </div>
      <button id="roll-btn">ì£¼ì‚¬ìœ„ ë˜ì§€ê¸° ğŸ²</button>
    </div>

    <div class="auto-controls">
      <div class="auto-top">
        <button id="auto-toggle">ìë™ êµ´ë¦¬ê¸° ì‹œì‘</button>
        <div class="speed-controls">
          <span class="speed-label">ì†ë„:</span>
          <div class="speed-rows">
            <div class="speed-row">
              <button class="speed-btn active" data-speed="1">1ë°°ì†</button>
              <button class="speed-btn" data-speed="2">2ë°°ì†</button>
            </div>
            <div class="speed-row">
              <button class="speed-btn" data-speed="5">5ë°°ì†</button>
              <button class="speed-btn" data-speed="10">10ë°°ì†</button>
            </div>
            <div class="speed-row">
              <button class="speed-btn" data-speed="100">100ë°°ì†</button>
              <button class="speed-btn" data-speed="1000">1000ë°°ì†</button>
            </div>
            <div class="speed-row">
              <button class="speed-btn" data-speed="10000">10000ë°°ì†</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <table>
      <thead>
        <tr>
          <th class="face-cell">ëˆˆ</th>
          <th class="count-cell">ë„ìˆ˜</th>
          <th class="freq-cell">ìƒëŒ€ë„ìˆ˜</th>
          <th class="bar-cell">ê·¸ë˜í”„</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="face-cell">1</td>
          <td class="count-cell"><span id="count-1">0</span></td>
          <td class="freq-cell"><span id="freq-1">0.0%</span></td>
          <td class="bar-cell">
            <div class="bar"><div id="bar-1" class="bar-inner"></div></div>
          </td>
        </tr>
        <tr>
          <td class="face-cell">2</td>
          <td class="count-cell"><span id="count-2">0</span></td>
          <td class="freq-cell"><span id="freq-2">0.0%</span></td>
          <td class="bar-cell">
            <div class="bar"><div id="bar-2" class="bar-inner"></div></div>
          </td>
        </tr>
        <tr>
          <td class="face-cell">3</td>
          <td class="count-cell"><span id="count-3">0</span></td>
          <td class="freq-cell"><span id="freq-3">0.0%</span></td>
          <td class="bar-cell">
            <div class="bar"><div id="bar-3" class="bar-inner"></div></div>
          </td>
        </tr>
        <tr>
          <td class="face-cell">4</td>
          <td class="count-cell"><span id="count-4">0</span></td>
          <td class="freq-cell"><span id="freq-4">0.0%</span></td>
          <td class="bar-cell">
            <div class="bar"><div id="bar-4" class="bar-inner"></div></div>
          </td>
        </tr>
        <tr>
          <td class="face-cell">5</td>
          <td class="count-cell"><span id="count-5">0</span></td>
          <td class="freq-cell"><span id="freq-5">0.0%</span></td>
          <td class="bar-cell">
            <div class="bar"><div id="bar-5" class="bar-inner"></div></div>
          </td>
        </tr>
        <tr>
          <td class="face-cell">6</td>
          <td class="count-cell"><span id="count-6">0</span></td>
          <td class="freq-cell"><span id="freq-6">0.0%</span></td>
          <td class="bar-cell">
            <div class="bar"><div id="bar-6" class="bar-inner"></div></div>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="footer">
      <span>ìƒëŒ€ë„ìˆ˜ = (ê° ëˆˆì˜ ë„ìˆ˜) Ã· (ì´ ë˜ì§„ íšŸìˆ˜)</span>
      <span class="credit">ë§Œë“ ì´: ì„œë¯¼ì¬</span>
    </div>
  </div>

  <script>
    const diceEl = document.getElementById("dice");
    const rollBtn = document.getElementById("roll-btn");
    const totalRollsEl = document.getElementById("total-rolls");

    const autoToggleBtn = document.getElementById("auto-toggle");
    const speedBtns = document.querySelectorAll(".speed-btn");

    // 1~6ê¹Œì§€ ë„ìˆ˜ ì €ì¥ (0ì€ ì‚¬ìš© ì•ˆ í•¨)
    const counts = new Array(7).fill(0);
    let totalRolls = 0;

    // ìë™ êµ´ë¦¬ê¸° ê´€ë ¨
    let autoIntervalId = null;
    let speedMultiplier = 1;

    const baseInterval = 600; // 1ë°°ì† ê¸°ì¤€(ms)
    const minInterval = 40;   // ë„ˆë¬´ ì‘ì•„ì§€ì§€ ì•Šë„ë¡ í•˜í•œ

    function updateStats() {
      for (let face = 1; face <= 6; face++) {
        const countEl = document.getElementById(`count-${face}`);
        const freqEl = document.getElementById(`freq-${face}`);
        const barEl = document.getElementById(`bar-${face}`);

        const count = counts[face];
        countEl.textContent = count;

        let freqPercent = 0;
        if (totalRolls > 0) {
          freqPercent = (count / totalRolls) * 100;
        }
        freqEl.textContent = freqPercent.toFixed(1) + "%";
        barEl.style.width = freqPercent.toFixed(1) + "%";
      }

      totalRollsEl.textContent = totalRolls;
    }

    function rollDice() {
      // ì• ë‹ˆë©”ì´ì…˜ ì¤‘ì—ëŠ” ë‹¤ì‹œ í´ë¦­ ì•ˆ ë˜ë„ë¡
      if (diceEl.classList.contains("rolling")) return;

      rollBtn.disabled = true;
      diceEl.classList.add("rolling");

      const result = Math.floor(Math.random() * 6) + 1;

      // ì• ë‹ˆë©”ì´ì…˜ ì‹œê°„(600ms) í›„ì— ê²°ê³¼ í‘œì‹œ
      setTimeout(() => {
        diceEl.classList.remove("rolling");
        diceEl.textContent = result;

        counts[result]++;
        totalRolls++;
        updateStats();

        // ìë™ êµ´ë¦¬ëŠ” ì¤‘ì´ ì•„ë‹ ë•Œë§Œ ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”
        if (!autoIntervalId) {
          rollBtn.disabled = false;
        }
      }, 600);
    }

    // ìë™ êµ´ë¦¬ê¸°ìš©: ì†ë„ì— ë”°ë¼ í•œ í‹±ì— ì—¬ëŸ¬ ë²ˆ ë˜ì§€ê¸°
    function autoRollStep() {
      // 1~10ë°°ì†: 1ë²ˆì”©, ê·¸ ì´ìƒì€ speedMultiplier/10ë§Œí¼ ë˜ì§€ê¸°
      const rollsPerStep = Math.max(1, Math.round(speedMultiplier / 10));

      let lastResult = 1;
      for (let i = 0; i < rollsPerStep; i++) {
        lastResult = Math.floor(Math.random() * 6) + 1;
        counts[lastResult]++;
        totalRolls++;
      }

      diceEl.textContent = lastResult; // ë§ˆì§€ë§‰ ê²°ê³¼ë§Œ í™”ë©´ì— í‘œì‹œ
      updateStats();
    }

    function computeInterval() {
      // 1~10ë°°ì†ê¹Œì§€ëŠ” ê°„ê²© ì¤„ì´ê³ , 100 ì´ìƒì€ ê°™ì€ ê°„ê²© + ì—¬ëŸ¬ ë²ˆ ë˜ì§€ê¸°
      const effectiveSpeed = Math.min(speedMultiplier, 10);
      return Math.max(minInterval, baseInterval / effectiveSpeed);
    }

    function startAuto() {
      if (autoIntervalId) return;
      const interval = computeInterval();
      autoIntervalId = setInterval(autoRollStep, interval);
      autoToggleBtn.classList.add("running");
      autoToggleBtn.textContent = "ìë™ êµ´ë¦¬ê¸° ì •ì§€";
      rollBtn.disabled = true; // ìë™ ëª¨ë“œì¼ ë•ŒëŠ” ìˆ˜ë™ ë²„íŠ¼ ì ê¸ˆ
    }

    function stopAuto() {
      if (!autoIntervalId) return;
      clearInterval(autoIntervalId);
      autoIntervalId = null;
      autoToggleBtn.classList.remove("running");
      autoToggleBtn.textContent = "ìë™ êµ´ë¦¬ê¸° ì‹œì‘";
      rollBtn.disabled = false;
    }

    rollBtn.addEventListener("click", rollDice);

    autoToggleBtn.addEventListener("click", () => {
      if (autoIntervalId) {
        stopAuto();
      } else {
        startAuto();
      }
    });

    speedBtns.forEach((btn) => {
      btn.addEventListener("click", () => {
        const newSpeed = Number(btn.dataset.speed);
        speedMultiplier = newSpeed;

        // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
        speedBtns.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");

        // ì´ë¯¸ ìë™ êµ´ë¦¬ëŠ” ì¤‘ì´ë©´ ì†ë„ ì¦‰ì‹œ ë°˜ì˜
        if (autoIntervalId) {
          clearInterval(autoIntervalId);
          const interval = computeInterval();
          autoIntervalId = setInterval(autoRollStep, interval);
        }
      });
    });

    // ì²˜ìŒ í™”ë©´ ê°±ì‹ 
    updateStats();
  </script>
</body>
</html>
